<div class="header">
  <ul class="nav nav-pills pull-right">
    <li><a ng-href="#">Home</a></li>
    <li class="active"><a ng-href="#/traced-statements">Trace Plans</a></li>
    <li><a ng-href="#/contact">Contact</a></li>
  </ul>
  <h3 class="text-muted"><img class="header-logo" src="images/splice-logo.jpg" alt="We are Splice Machine"> Admin Console</h3>
</div>

<!-- Simple HTML indented list of the operations tree.  Very useful for debugging D3 code. -->
<!-- Commenting out the HTML display of the operations tree.
<div class="row marketing">
<script type="text/ng-template"  id="tree_item_renderer.html">
    {{node.operationType}}
    <ul>
        <li ng-repeat="node in node.children" ng-include="'tree_item_renderer.html'"></li>
    </ul>
</script>

<ul>
    <li ng-repeat="node in tree" ng-include="'tree_item_renderer.html'"></li>
</ul>
</div>
-->

<!-- Commenting out d3Bars bar chart.
<div class="row marketing" ng-controller="d3BarsController">
  <span>{{title}}</span>
  <d3-bars data="d3Data" label="name" on-click="d3OnClick(item)"></d3-bars>
  <br>
  <br>
  <span>First Item</span>
  <input type="text" ng-model="d3Data[0].score"></input>
  <br>
  <span>Second Item</span>
  <input type="text" ng-model="d3Data[1].score"></input>
  <br>
  <span>Third Item</span>
  <input type="text" ng-model="d3Data[2].score"></input>
</div>
-->

<!-- TODO: Move CSS -->
<style>
  .link {
    fill: none;
    stroke: #ccc;
    stroke-width: 4.5px;
  }
</style>

<div class="row marketing" ng-controller="operationsTreeController">
  <div class="row marketing">
    <span><h4 class="text-primary">{{tracedStatementSQL}}</h4></span>
    <operations-tree data="tree[0]" label="operationType" on-click="d3OnClick(item)"></operations-tree>
  </div>
  <div class="row marketing operation-details-box round-corners" ng-hide="!clickedOperation">
    <div class="operation-details-title">{{clickedOperation.operationType}} Details</div>
    <div id="operation-details-summary">
      <span class="operation-details-sub-title">Summary</span>
      <ul id="operation-details-summary-list">
        <li ng-hide="!clickedOperation.host">Host: {{clickedOperation.host}}</li>
        <li ng-hide="!clickedOperation.info">Info: {{clickedOperation.info}}</li>
        <li ng-hide="!clickedOperation.iterations">Iterations: {{clickedOperation.iterations}}</li>
        <li ng-hide="!clickedOperation.processingCPUTime">Processing CPU Time: {{formatRawNanoTime(clickedOperation.processingCPUTime)}}</li>
        <li ng-hide="!clickedOperation.processingUserTime">Processing User Time: {{formatRawNanoTime(clickedOperation.processingUserTime)}}</li>
        <li ng-hide="!clickedOperation.processingWallTime">Processing Wall Time: {{formatRawNanoTime(clickedOperation.processingWallTime)}}</li>
        <li ng-hide="!clickedOperation.region">Region: {{clickedOperation.region}}</li>
        <li ng-hide="!clickedOperation.totalCPUTime">Total CPU Time: {{formatRawNanoTime(clickedOperation.totalCPUTime)}}</li>
        <li ng-hide="!clickedOperation.totalUserTime">Total User Time: {{formatRawNanoTime(clickedOperation.totalUserTime)}}</li>
        <li ng-hide="!clickedOperation.totalWallTime">Total Wall Time: {{formatRawNanoTime(clickedOperation.totalWallTime)}}</li>
      </ul>
    </div>
    <div id="operation-details-input">
      <span class="operation-details-sub-title">Input</span>
      <ul id="operation-details-input-list">
        <li ng-hide="!clickedOperation.filteredRows">Filtered Rows: {{clickedOperation.filteredRows}}</li>
        <li ng-hide="!clickedOperation.inputRows">Input Rows: {{clickedOperation.inputRows}}</li>
        <li ng-hide="!clickedOperation.localScanBytes">Local Scan Bytes: {{clickedOperation.localScanBytes}}</li>
        <li ng-hide="!clickedOperation.localScanCPUTime">Local Scan CPU Time: {{formatRawNanoTime(clickedOperation.localScanCPUTime)}}</li>
        <li ng-hide="!clickedOperation.localScanRows">Local Scan Rows: {{clickedOperation.localScanRows}}</li>
        <li ng-hide="!clickedOperation.localScanUserTime">Local Scan User Time: {{formatRawNanoTime(clickedOperation.localScanUserTime)}}</li>
        <li ng-hide="!clickedOperation.localScanWallTime">Local Scan Wall Time: {{formatRawNanoTime(clickedOperation.localScanWallTime)}}</li>
        <li ng-hide="!clickedOperation.remoteGetBytes">Remote Get Bytes: {{clickedOperation.remoteGetBytes}}</li>
        <li ng-hide="!clickedOperation.remoteGetCPUTime">Remote Get CPU Time: {{formatRawNanoTime(clickedOperation.remoteGetCPUTime)}}</li>
        <li ng-hide="!clickedOperation.remoteGetRows">Remote Get Rows: {{clickedOperation.remoteGetRows}}</li>
        <li ng-hide="!clickedOperation.remoteGetUserTime">Remote Get UserTime: {{formatRawNanoTime(clickedOperation.remoteGetUserTime)}}</li>
        <li ng-hide="!clickedOperation.remoteGetWallTime">Remote Get Wall Time: {{formatRawNanoTime(clickedOperation.remoteGetWallTime)}}</li>
        <li ng-hide="!clickedOperation.remoteScanBytes">Remote Scan Bytes: {{clickedOperation.remoteScanBytes}}</li>
        <li ng-hide="!clickedOperation.remoteScanCPUTime">Remote Scan CPU Time: {{formatRawNanoTime(clickedOperation.remoteScanCPUTime)}}</li>
        <li ng-hide="!clickedOperation.remoteScanRows">Remote Scan Rows: {{clickedOperation.remoteScanRows}}</li>
        <li ng-hide="!clickedOperation.remoteScanUserTime">Remote Scan User Time: {{formatRawNanoTime(clickedOperation.remoteScanUserTime)}}</li>
        <li ng-hide="!clickedOperation.remoteScanWallTime">Remote Scan Wall Time: {{formatRawNanoTime(clickedOperation.remoteScanWallTime)}}</li>
      </ul>
    </div>
    <div id="operation-details-output">
      <span class="operation-details-sub-title">Output</span>
      <ul id="operation-details-output-list">
        <li ng-hide="!clickedOperation.failedWriteAttempts">Failed Write Attempts: {{clickedOperation.failedWriteAttempts}}</li>
        <li ng-hide="!clickedOperation.outputRows">Output Rows: {{clickedOperation.outputRows}}</li>
        <li ng-hide="!clickedOperation.partialWriteFailures">Partial Write Failures: {{clickedOperation.partialWriteFailures}}</li>
        <li ng-hide="!clickedOperation.rejectedWriteAttempts">Rejected Write Attempts: {{clickedOperation.rejectedWriteAttempts}}</li>
        <li ng-hide="!clickedOperation.retriedWriteAttempts">Retried Write Attempts: {{clickedOperation.retriedWriteAttempts}}</li>
        <li ng-hide="!clickedOperation.writeBytes">Write Bytes: {{clickedOperation.writeBytes}}</li>
        <li ng-hide="!clickedOperation.writeNetworkCPUTime">Write Network CPU Time: {{formatRawNanoTime(clickedOperation.writeNetworkCPUTime)}}</li>
        <li ng-hide="!clickedOperation.writeNetworkUserTime">Write Network User Time: {{formatRawNanoTime(clickedOperation.writeNetworkUserTime)}}</li>
        <li ng-hide="!clickedOperation.writeNetworkWallTime">Write Network Wall Time: {{formatRawNanoTime(clickedOperation.writeNetworkWallTime)}}</li>
        <li ng-hide="!clickedOperation.writeRows">Write Rows: {{clickedOperation.writeRows}}</li>
        <li ng-hide="!clickedOperation.writeSleepCPUTime">Write Sleep CPU Time: {{formatRawNanoTime(clickedOperation.writeSleepCPUTime)}}</li>
        <li ng-hide="!clickedOperation.writeSleepUserTime">Write Sleep User Time: {{formatRawNanoTime(clickedOperation.writeSleepUserTime)}}</li>
        <li ng-hide="!clickedOperation.writeSleepWallTime">Write Sleep Wall Time: {{formatRawNanoTime(clickedOperation.writeSleepWallTime)}}</li>
        <li ng-hide="!clickedOperation.writeThreadCPUTime">Write Thread CPU Time: {{formatRawNanoTime(clickedOperation.writeThreadCPUTime)}}</li>
        <li ng-hide="!clickedOperation.writeThreadUserTime">Write Thread User Time: {{formatRawNanoTime(clickedOperation.writeThreadUserTime)}}</li>
        <li ng-hide="!clickedOperation.writeThreadWallTime">Write Thread Wall Time: {{formatRawNanoTime(clickedOperation.writeThreadWallTime)}}</li>
      </ul>
    </div>
    <!-- TODO: Remove the evil TABLE tag!!! -->
    <!--
    <h5>Details for {{clickedOperation.operationType}}:</h5>
    <h6>
    <table border="1">
      <tr>
        <td>failedWriteAttempts: {{clickedOperation.failedWriteAttempts}}</td>
        <td>filteredRows: {{clickedOperation.filteredRows}}</td>
        <td>host: {{clickedOperation.host}}</td>
        <td>info: {{clickedOperation.info}}</td>
      </tr>
      <tr>
        <td>inputRows: {{clickedOperation.inputRows}}</td>
        <td>iterations: {{clickedOperation.iterations}}</td>
        <td>localScanBytes: {{clickedOperation.localScanBytes}}</td>
        <td>localScanCPUTime: {{clickedOperation.localScanCPUTime}}</td>
      </tr>
      <tr>
        <td>localScanRows: {{clickedOperation.localScanRows}}</td>
        <td>localScanUserTime: {{clickedOperation.localScanUserTime}}</td>
        <td>localScanWallTime: {{clickedOperation.localScanWallTime}}</td>
        <td>operationType: {{clickedOperation.operationType}}</td>
      </tr>
      <tr>
        <td>outputRows: {{clickedOperation.outputRows}}</td>
        <td>partialWriteFailures: {{clickedOperation.partialWriteFailures}}</td>
        <td>processingCPUTime: {{clickedOperation.processingCPUTime}}</td>
        <td>processingUserTime: {{clickedOperation.processingUserTime}}</td>
      </tr>
      <tr>
        <td>processingWallTime: {{clickedOperation.processingWallTime}}</td>
        <td>region: {{clickedOperation.region}}</td>
        <td>rejectedWriteAttempts: {{clickedOperation.rejectedWriteAttempts}}</td>
        <td>remoteGetBytes: {{clickedOperation.remoteGetBytes}}</td>
      </tr>
      <tr>
        <td>remoteGetCPUTime: {{clickedOperation.remoteGetCPUTime}}</td>
        <td>remoteGetRows: {{clickedOperation.remoteGetRows}}</td>
        <td>remoteGetUserTime: {{clickedOperation.remoteGetUserTime}}</td>
        <td>remoteGetWallTime: {{clickedOperation.remoteGetWallTime}}</td>
      </tr>
      <tr>
        <td>remoteScanBytes: {{clickedOperation.remoteScanBytes}}</td>
        <td>remoteScanCPUTime: {{clickedOperation.remoteScanCPUTime}}</td>
        <td>remoteScanRows: {{clickedOperation.remoteScanRows}}</td>
        <td>remoteScanUserTime: {{clickedOperation.remoteScanUserTime}}</td>
      </tr>
      <tr>
        <td>remoteScanWallTime: {{clickedOperation.remoteScanWallTime}}</td>
        <td>retriedWriteAttempts: {{clickedOperation.retriedWriteAttempts}}</td>
        <td>totalCPUTime: {{clickedOperation.totalCPUTime}}</td>
        <td>totalUserTime: {{clickedOperation.totalUserTime}}</td>
      </tr>
      <tr>
        <td>totalWallTime: {{clickedOperation.totalWallTime}}</td>
        <td>writeBytes: {{clickedOperation.writeBytes}}</td>
        <td>writeNetworkCPUTime: {{clickedOperation.writeNetworkCPUTime}}</td>
        <td>writeNetworkUserTime: {{clickedOperation.writeNetworkUserTime}}</td>
      </tr>
      <tr>
        <td>writeNetworkWallTime: {{clickedOperation.writeNetworkWallTime}}</td>
        <td>writeRows: {{clickedOperation.writeRows}}</td>
        <td>writeSleepCPUTime: {{clickedOperation.writeSleepCPUTime}}</td>
        <td>writeSleepUserTime: {{clickedOperation.writeSleepUserTime}}</td>
      </tr>
      <tr>
        <td>writeSleepWallTime: {{clickedOperation.writeSleepWallTime}}</td>
        <td>writeThreadCPUTime: {{clickedOperation.writeThreadCPUTime}}</td>
        <td>writeThreadUserTime: {{clickedOperation.writeThreadUserTime}}</td>
        <td>writeThreadWallTime: {{clickedOperation.writeThreadWallTime}}</td>
      </tr>
    </table>
    </h6>
    -->
  </div>
</div>

<div class="footer">
  <p>&copy; 2014 Splice Machine, Inc. All rights reserved.</p>
</div>
